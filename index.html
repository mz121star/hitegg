<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>
</head>
<body>
<div class="chui" id="chui">
    <img src="img/chui1.png" width="80"/>
</div>
<section class="stage">
    <img class="bg" src="img/bg.jpg">

    <div class="info">
        <img src="img/info1.png" class="infopic">
        <span class="jiang1" style="top:-200px">
            <p class="p p1">短融网A轮融资盛宴惊喜不断</p>
            <p class="p p2"><span class="yellow">3000</span>万元风险保障金保驾护航</p>
            <p class="p p3">天上掉下<span class="yellow">88</span>元</p>
            <div class="p p3"><a href="#" class="button orange">去领钱</a></div>
        </span>
    </div>
    <div id="shape" class="cube on">
        <div class="plane one"><span class="egga egga1" data-num="1"><figure class="eggb1">&nbsp;</figure></span></div>
        <div class="plane two"><span class="egga egga2" data-num="2"><figure class="eggb2">&nbsp;</figure></span></div>
        <div class="plane three"><span class="egga egga3" data-num="3"><figure class="eggb3">&nbsp;</figure></span>
        </div>
        <img src="img/egg1.png" style="display: none;">
        <img src="img/egg2.png" style="display: none;">
        <img src="img/egg3.png" style="display: none;">
        <img src="img/d101.png" style="display: none;">
        <img src="img/d102.png" style="display: none;">
        <img src="img/d103.png" style="display: none;">
        <img src="img/d104.png" style="display: none;">
        <img src="img/d105.png" style="display: none;">
        <img src="img/d106.png" style="display: none;">
        <img src="img/d107.png" style="display: none;">
    </div>
</section>
<script src="js/vendor/jquery-1.10.2.min.js"></script>
<script src="js/hammer.min.js"></script>
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>
<script>
    function playAudio(url){
       var audioElement = document.createElement('audio');
       audioElement.setAttribute('src',url);
       audioElement.setAttribute('autoplay', 'autoplay'); //打开自动播放
       //audioElement.load()

         $.get();
       audioElement.play();
     }

    (function (jQuery) {

        jQuery.eventEmitter = {
            _JQInit: function () {
                this._JQ = jQuery(this);
            },
            emit: function (evt, data) {
                !this._JQ && this._JQInit();
                this._JQ.trigger(evt, data);
            },
            once: function (evt, handler) {
                !this._JQ && this._JQInit();
                this._JQ.one(evt, handler);
            },
            on: function (evt, handler) {
                !this._JQ && this._JQInit();
                this._JQ.bind(evt, handler);
            },
            off: function (evt, handler) {
                !this._JQ && this._JQInit();
                this._JQ.unbind(evt, handler);
            }
        };

    }(jQuery));

    var over = 0;
    var jiangxiang = 0;
    function App() {

    }
    jQuery.extend(App.prototype, jQuery.eventEmitter);

    var eggapp = new App();
    $(".egga").one("click", function (e) {

        if (over > 3)
            return false;
        playAudio("audio/break.wav");
        var num = $(this).data("num");
        jiangxiang = num;
        console.log(num)
        var a = $(".eggb" + num);


        var l, t;
        l = $(this).offset().left;
        t = $(this).offset().top;

        console.log(l + ";;" + t)
        $(".chui").addClass("chuiaddw").addClass("chuiadd")
        $(".chui").animate({//锤子动画
            "top": t - 25,
            "left": l + 25

        }, 0, function () {
            /*      $(a).css({"background-size": "251%","background-position": "-58px -76px"}) */

            /* $(a).css("background-image", "url(img/d102.png)");*/
            var i = 1;
            var inter = window.setInterval(function () {
                $(a).css("background-image", "url(img/egg" + i + "_03.png)");
                i++;
                if (i == 5) {
                    window.clearInterval(inter);
                    $(".chui").removeClass("chuiaddw").removeClass("chuiadd")
                }
            }, 60)

            over = over + 1;
        }).animate({
            "top": t - 50,
            "left": l + 65,
            "-webkit-transform": "rotateZ(0deg)"
        }, 30)
        eggapp.emit("zhongjiang", {num: num});
    });
    $(".p").hide();
    eggapp.on("zhongjiang", function (event, data) {
        $(".p").hide();
        $(".infopic").hide();
        if(over==1||over==3){
            $(".jiang1").css({ "top": "-200px","opacity":"0" })
        }if(over==2){
            $(".jiang1").css({ "left": "-600px","opacity":"0" })
        }


        if (over == 1) {

            $(".jiang1 .p1").show()

        }
        if (over == 2) {

            $(".jiang1 .p2").show()

        }
        if (over == 3) {

            $(".jiang1 .p3").show()

        }

        $(".jiang1").show().delay(300).animate({
            "top": "40px",
            "left": "0px",
            "opacity":"1"

        }, 1000);
        window.setTimeout(function(){ playAudio("audio/fly.wav");},500)
    })


</script>
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->

</body>
</html>
